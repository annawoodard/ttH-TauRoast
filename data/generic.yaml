# vim: set sw=4 sta et :

analysis:
    max events: -1

    final mva:
        methods:
            BDTG: "!H:!V:NTrees=1000:BoostType=Grad:Shrinkage=0.10:UseBaggedGrad:GradBaggingFraction=0.5:nCuts=20:NNodesMax=5"
        signal: TTHTauTau_125_real
        background: [TTbar_Hadronic, TTbar_SemiLept, TTbar_FullLept]
        variables:
          - Tau1Pt
          - Tau1Eta
          - Tau2Pt
          - Tau1DecayMode
          - Tau2DecayMode
          - Tau1IsolationMVA2Raw
          - Tau2IsolationMVA2Raw
          - LeadingJetPt
          - DitauVisibleMass
          - DeltaRTau1Lepton

    process:
      - Collisions
      - TTbar
      - Wjets
      - DiBoson
      - Zjets
      - SingleTop
      - ttWZ
      - TTHTauTau_125_real
      - TTH_110
      - TTH_115
      - TTH_120
      - TTH_125
      - TTH_130
      - TTH_135
      - TTH_140

    plot:
      - Collisions
      - TTbar
      - Wjets
      - DiBoson
      - Zjets
      - SingleTop
      - ttWZ
      - TTH_125

    combine:
        TTbar:
            name: t + tbar
            legend: "t #bar{t}"
            color: 633
            processes: [TTbar_Hadronic, TTbar_SemiLept, TTbar_FullLept]
        Zjets:
            name: Z + jets
            legend: Z + jets
            color: 418
            processes: [ZplusJets_LowMass, ZplusOneJet, ZplusTwoJets, ZplusThreeJets, ZplusFourJets]
        DiBoson:
            name: WW, WZ, ZZ
            legend: WW, WZ, ZZ
            color: 432
            processes: [WW, WZ, ZZ]
        SingleTop:
            name: Single t/tbar
            legend: "single t/#bar{t}"
            color: 616
            processes: [singleTopSch, singleTopBarSch, singleTopTch, singleTopBarTch, singleTopPlusW, singleTopBarPlusW]
        ttWZ:
            name: ttbar + W/Z
            legend: "t#bar{t} + W/Z"
            color: 590
            processes: [ttPlusW, ttPlusZ]
        Wjets:
            name: W + jets
            legend: W + jets
            color: 861
            processes: [WplusOneJet, WplusTwoJets, WplusThreeJets, WplusFourJets]

display:
    legend columns: 3

physics:
    lumi: 19400
    flags:
        CSVeventWeight: nominal
        lepton: nominal
        PUcorr: nominal
        topPt: nominal
        brSF: nominal
    cuts:
      # tops
      - "J_NumCleanCSVM:1:1"
      - "J_NumCleanNonCSVM:1:1"
      # lepton
      - "L_pT:30:"
      - "NumTightLeptons:1:1"
      - "NumExLooseLeptons:0:0"
      # taus
      # kinematic
      - "T1_pT:20:"
      - "T2_pT:20:"
      - "T1_Eta:-2.1:2.1"
      - "T2_Eta:-2.1:2.1"
      - "TT_DeltaR:0.5:"
      # topological
      - "TT_ChargeProduct:-1:-1"
      - "T1L_DeltaR:0.25:"
      - "T2L_DeltaR:0.25:"
      # reality
      - "T1_MatchAbsId:15:15"
      - "T2_MatchAbsId:15:15"
      - "T1_ParentAbsId:25:25"
      - "T2_ParentAbsId:25:25"
      # optimization
      - "T1_DecayModeFinding:1:1"
      - "T1_LTpT:5:"
      - "T1_AntiElectronIndex:1:"
      - "T1_AntiMuonIndex:1:"
      - "T1_NumProngs:1:1"
      - "T1_IsolationMVA2Raw:0.25:"
      - "T2_DecayModeFinding:1:1"
      - "T2_LTpT:5:"
      - "T2_AntiElectronIndex:1:"
      - "T2_AntiMuonIndex:1:"
      - "T2_NumProngs:1:1"
      - "T2_IsolationMVA2Raw:0:"
    pair selection: iso
    systematics:
        eTauFake: 1.05
        jetTauFake: 1.2
        tauIdEff: 1.06

paths:
    # for analyzed processes
    input: /afs/crc.nd.edu/user/m/mwolf3/www/test_roast/roast_processed.root
    # for processes with filled histograms
    output: /afs/crc.nd.edu/user/m/mwolf3/www/test_roast/roast_filled.root
    mva output: "/afs/crc.nd.edu/user/m/mwolf3/www/test_roast/{m}"
    # allowed wildcards: {t} = type (pdf, png); {d} = directory; {n} =
    # name; {m} = mode (_log)
    stack format: "/afs/crc.nd.edu/user/m/mwolf3/www/test_roast/{t}/{d}/{n}{m}.{t}"
    ntuples: /hadoop/users/matze/ttH/v45/2012/
    tree: makeNtuple/TTbarHTauTau

processes: process_v47.yaml
histograms: histograms.yaml
